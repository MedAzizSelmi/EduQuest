<div class="dashboard-container">
  <h1>Admin Dashboard</h1>

  <!-- User Stats -->
  <div class="stats-cards">
    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.totalUsers}}</div>
        <div class="stat-label">Total Users</div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.totalStudents}}</div>
        <div class="stat-label">Students</div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.totalTeachers}}</div>
        <div class="stat-label">Teachers</div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.totalAdmins}}</div>
        <div class="stat-label">Admins</div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Course Stats -->
  <div class="stats-cards">
    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.totalCourses}}</div>
        <div class="stat-label">Total Courses</div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.publishedCourses}}</div>
        <div class="stat-label">Published</div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.draftCourses}}</div>
        <div class="stat-label">Drafts</div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.archivedCourses}}</div>
        <div class="stat-label">Archived</div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Enrollment Stats -->
  <div class="stats-cards">
    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.totalEnrollments}}</div>
        <div class="stat-label">Total Enrollments</div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.completedEnrollments}}</div>
        <div class="stat-label">Completed</div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.completionRate | number:'1.0-0'}}%</div>
        <div class="stat-label">Completion Rate</div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Content Stats -->
  <div class="stats-cards">
    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.totalQuizzes}}</div>
        <div class="stat-label">Total Quizzes</div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.totalExams}}</div>
        <div class="stat-label">Total Exams</div>
      </mat-card-content>
    </mat-card>

    <mat-card>
      <mat-card-content>
        <div class="stat-value">{{dashboard.totalCertificates}}</div>
        <div class="stat-label">Total Certificates</div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Growth Charts -->
  <div class="charts-container">
    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>User Growth</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <!-- Chart would be implemented here with a charting library like Chart.js or ngx-charts -->
        <div class="chart-placeholder">
          <table class="growth-table">
            <thead>
              <tr>
                <th>Period</th>
                <th>Count</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let growth of dashboard.userGrowth">
                <td>{{growth.period}}</td>
                <td>{{growth.count}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>Course Growth</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <!-- Chart would be implemented here with a charting library like Chart.js or ngx-charts -->
        <div class="chart-placeholder">
          <table class="growth-table">
            <thead>
              <tr>
                <th>Period</th>
                <th>Count</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let growth of dashboard.courseGrowth">
                <td>{{growth.period}}</td>
                <td>{{growth.count}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </mat-card-content>
    </mat-card>

    <mat-card class="chart-card">
      <mat-card-header>
        <mat-card-title>Enrollment Growth</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <!-- Chart would be implemented here with a charting library like Chart.js or ngx-charts -->
        <div class="chart-placeholder">
          <table class="growth-table">
            <thead>
              <tr>
                <th>Period</th>
                <th>Count</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let growth of dashboard.enrollmentGrowth">
                <td>{{growth.period}}</td>
                <td>{{growth.count}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Top Courses Table -->
  <mat-card class="top-courses-card">
    <mat-card-header>
      <mat-card-title>Top Courses</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <table mat-table [dataSource]="dashboard.topCourses" class="mat-elevation-z0">
        <!-- Title Column -->
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef>Title</th>
          <td mat-cell *matCellDef="let course">{{course.title}}</td>
        </ng-container>

        <!-- Teacher Name Column -->
        <ng-container matColumnDef="teacherName">
          <th mat-header-cell *matHeaderCellDef>Teacher</th>
          <td mat-cell *matCellDef="let course">{{course.teacherName}}</td>
        </ng-container>

        <!-- Enrollment Count Column -->
        <ng-container matColumnDef="enrollmentCount">
          <th mat-header-cell *matHeaderCellDef>Enrollments</th>
          <td mat-cell *matCellDef="let course">{{course.enrollmentCount}}</td>
        </ng-container>

        <!-- Completion Rate Column -->
        <ng-container matColumnDef="completionRate">
          <th mat-header-cell *matHeaderCellDef>Completion Rate</th>
          <td mat-cell *matCellDef="let course">
            <mat-progress-bar mode="determinate" [value]="course.completionRate"></mat-progress-bar>
            <span>{{course.completionRate | number:'1.0-0'}}%</span>
          </td>
        </ng-container>

        <!-- Average Rating Column -->
        <ng-container matColumnDef="averageRating">
          <th mat-header-cell *matHeaderCellDef>Rating</th>
          <td mat-cell *matCellDef="let course">
            <div class="rating">
              <mat-icon *ngFor="let i of [1,2,3,4,5]"
                       [class.filled]="i <= course.averageRating"
                       [class.half-filled]="i - 0.5 === course.averageRating">
                star
              </mat-icon>
              <span>{{course.averageRating | number:'1.1-1'}}</span>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </mat-card-content>
  </mat-card>

  <!-- Admin Actions -->
  <div class="admin-actions">
    <button mat-raised-button color="primary" routerLink="/admin/users">
      <mat-icon>people</mat-icon>
      Manage Users
    </button>
    <button mat-raised-button color="accent" routerLink="/courses">
      <mat-icon>school</mat-icon>
      Manage Courses
    </button>
    <button mat-raised-button color="warn">
      <mat-icon>settings</mat-icon>
      System Settings
    </button>
  </div>
</div>
